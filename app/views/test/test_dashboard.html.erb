<!DOCTYPE html>

<head>
  <style>
    body{
      font-size: 12px;
    }
    #dash_panel_head{
      font-size: 14px;
      background: transparent;
      border-bottom: none;
    }
    #firm_carousel_panel{
      width: 250px;
    }
    .panel-highlight{
      border-color: #5cb85c;
      border-width: medium;
    }
    .panel-warning{
      border-color: #d9534f;
      border-width: medium;
    }
    .panel-caution{
      border-color: #ffe74e;
      border-width: medium;
    }
    .panel-succeed{
      border-color: #5cb85c;
      border-width: medium;
    }
    /* The two CSS statements below make the last row's panels all equal height and width */
    .equal, .equal > div[class*='col-'] {
      display: -webkit-flex;
      display: flex;
      flex:1 1 auto;
    }
    .panel {
      width: 100%;
    }
    .carousel-control.left, .carousel-control.right {
        background-image: none;
    }
    .carousel-control .glyphicon-chevron-left, .carousel-control .icon-prev {
      left: 0;
    }
    .carousel-control .glyphicon-chevron-right, .carousel-control .icon-next {
      right: 0;
    }
    .glyphicon.glyphicon-chevron-right{
      color:#428bca;
    }
    .glyphicon.glyphicon-chevron-left{
      color:#428bca;
    }
    #logo {
    height: 150px;
    width: auto;
    overflow: hidden;
    display: block;
    margin: auto;
    }
    .carousel-indicators li {
        background-color: #d4d4d4;
    }
    .carousel-indicators .active {
        background-color: #428bca;
    }
/* Timeline */
    .timeline,
    .timeline-horizontal {
      list-style: none;
      padding: 20px;
      position: relative;
    }
    .timeline:before {
      top: 40px;
      bottom: 0;
      position: absolute;
      content: " ";
      width: 3px;
      background-color: #eeeeee;
      left: 50%;
      margin-left: -1.5px;
    }
    .timeline .timeline-item {
      margin-bottom: 20px;
      position: relative;
    }
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
      content: "";
      display: table;
    }
    .timeline .timeline-item:after {
      clear: both;
    }
    .timeline .timeline-item .timeline-badge {
      color: #fff;
      width: 54px;
      height: 54px;
      line-height: 52px;/*originally 52px*/
      font-size: 20px; /*originally in the 20s*/
      text-align: center;
      position: absolute;
      top: 18px;
      left: 50%;
      margin-left: -25px;
      background-color: #7c7c7c;
      border: 3px solid #ffffff;
      z-index: 100;
      border-top-right-radius: 50%;
      border-top-left-radius: 50%;
      border-bottom-right-radius: 50%;
      border-bottom-left-radius: 50%;
    }
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
      top: 2px;
      left: 0px;
    }
    .timeline .timeline-item .timeline-badge.phone {
      background-color: #5cb85c;
    }
    .timeline .timeline-item .timeline-badge.person {
      background-color: #d9534f;
    }
    .timeline .timeline-item .timeline-badge.oncampus {
      background-color: #ffa100   ;
    }
    .timeline .timeline-item .timeline-badge.offcampus {
      background-color: #1f9eba;
    }
    .timeline .timeline-item .timeline-badge.info {
      background-color: #5bc0de;
    }
    .timeline .timeline-item .timeline-badge.success {
      background-color: #59ba1f;
    }
    .timeline .timeline-item .timeline-badge.warning {
      background-color: #d1bd10;
    }
    .timeline .timeline-item .timeline-badge.danger {
      background-color: #ba1f1f;
    }
    .timeline .timeline-item .timeline-panel {
      position: relative;
      width: 46%;
      float: left;
      right: 16px;
      border: 1px solid #c0c0c0;
      background: #ffffff;
      border-radius: 2px;
      padding: 20px;
      -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
      box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    .timeline .timeline-item .timeline-panel:before {
      position: absolute;
      top: 26px;
      right: -16px;
      display: inline-block;
      border-top: 16px solid transparent;
      border-left: 16px solid #c0c0c0;
      border-right: 0 solid #c0c0c0;
      border-bottom: 16px solid transparent;
      content: " ";
    }
    .timeline .timeline-item .timeline-panel .timeline-title {
      margin-top: 0;
      color: inherit;
    }
    .timeline .timeline-item .timeline-panel .timeline-body > p,
    .timeline .timeline-item .timeline-panel .timeline-body > ul {
      margin-bottom: 0;
    }
    .timeline .timeline-item .timeline-panel .timeline-body > p + p {
      margin-top: 5px;
    }
    .timeline .timeline-item:last-child:nth-child(even) {
      float: right;
    }
    .timeline .timeline-item:nth-child(even) .timeline-panel {
      float: right;
      left: 16px;
    }
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
      border-left-width: 0;
      border-right-width: 14px;
      left: -14px;
      right: auto;
    }
    .timeline-horizontal {
      list-style: none;
      position: relative;
      padding: 20px 0px 20px 0px; /*originally 20px 0 20 0*/
      display: inline-block;
    }
    .timeline-horizontal:before {
      height: 3px;
      top: auto;
      bottom: 26px;
      left: 56px;
      right: 0;
      width: 100%;
      margin-bottom: 20px;
    }
    .timeline-horizontal .timeline-item {
      display: table-cell;
      height: 220px; /* originally was 280*/
      width: 20%;
      min-width: 220px; /*originally was 320*/
      float: none !important;
      padding-left: 0px;
      padding-right: 20px;
      margin: 0 auto;
      vertical-align: bottom;
    }
    .timeline-horizontal .timeline-item .timeline-panel {
      top: auto;
      bottom: 50px; /*originally was 64px*/
      display: inline-block;
      float: none !important;
      left: 0 !important;
      right: 0 !important;
      width: 100%;
      margin-bottom: 20px;
    }
    .timeline-horizontal .timeline-item .timeline-panel:before {
      top: auto;
      bottom: -16px;
      left: 28px !important;
      right: auto;
      border-right: 16px solid transparent !important;
      border-top: 16px solid #c0c0c0 !important;
      border-bottom: 0 solid #c0c0c0 !important;
      border-left: 16px solid transparent !important;
    }
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
      display: none;
    }
    .timeline-horizontal .timeline-item .timeline-badge {
      top: auto;
      bottom: 0px;
      left: 43px;
    }
    /* End of Timeline CSS */
    /* Additional Timeline CSS I added*/
    #timeline_logo{
      height: 30px;
      width: auto;
      overflow: hidden;
      display: block;
      vertical-align: middle;
      margin: auto;
    }
    /* End of Additional Timeline CSS*/
  </style>
  <script type="text/javascript">
  </script>

</head>

<div class="container">
    <div class="row header">
        <div class="col-xs-12">
          <div class="jumbotron"><h1 align="center">User Dashboard Header</h1></div>
        </div>
    </div>
    <div class="row header">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel panel-body" style="box-shadow: none; margin-bottom: 0; padding-bottom: 0;">
            <div class="col-xs-2">
              <img src="http://localhost:3000/assets/icons/student_male" class="img-responsive">
              <p align="center"><small><%= current_user.email %></small></p>
              <p align="center"><button class="btn btn-success">Update Profile</button></p>
              <p align="center" style="padding-top: 10px"><small>You have 5 Alerts!</small></p>
              <!-- View alerts button should queue up alerts arrayed in a modal -->
            <p align="center"><button class="btn btn-warning">View Alerts</button></p>
            </div>
            <div class="col-xs-5">
              <div class="panel panel-default">
                <div class="panel-heading" id="dash_panel_head" style="text-align: center; font-size: 14px;">Upcoming Interactions</div>
                <div class="panel-body" style="height: 280px; overflow: auto;">
                  <table class="table table-striped">
                    <tr>
                      <th>Date</th>
                      <th>Contact</th>
                      <th>Firm</th>
                      <th>Setting</th>
                    </tr>
                    <% @touchpoints = Touchpoint.where({:user_id => current_user.id}) %>
                    <% @touchpoints.order("date ASC").each do |touchpoint| %>
                    <% if touchpoint.date >= Date.today %>
                    <tr>
                      <td><%=touchpoint.date.strftime("%m/%e")%></td>
                      <td><%=touchpoint.contact.full_name%></td>
                      <td><%=touchpoint.contact.firm.name%></td>
                      <td><%=touchpoint.setting.setting%></td>
                    </tr>
                    <% end %>
                    <% end %>
                  </table>
                </div>
              </div>
            </div>
            <div class="col-xs-5">
              <div class="panel panel-default">
                <div class="panel-heading" id="dash_panel_head" style="text-align: center; font-size: 14px;">Upcoming Events</div>
                <div class="panel-body" style="height: 280px; overflow: auto;">
                  <table class="table table-striped">
                    <tr>
                      <th>Date</th>
                      <th>Name</th>
                      <th>Firm</th>
                      <th>Location</th>
                    </tr>
                  <% @rsvps = EventAttendee.all %>
                  <% @rsvps.each do |rsvp| %>
                  <% if rsvp.recruiting_event.date >= Date.today %>
                  <tr>
                    <td><%=rsvp.recruiting_event.date.strftime("%m/%e")%></td>
                    <td><%=rsvp.recruiting_event.name%></td>
                    <td><%=rsvp.recruiting_event.firm.name%></td>
                    <td><%=rsvp.recruiting_event.location%></td>
                  </tr>
                  <% end %>
                  <% end %>
                </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -->
    <!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX  STOPPING POINT STOPPING POINT STOPPING POINT XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -->
    <div class="row">
      <div class="col col-xs-12">
      <div class="panel panel-default">
        <div class="panel-heading"  id="dash_panel_head">Target Firms <small class="text-muted">status board</small></div>
        <div class="panel panel-body" style="box-shadow: none; margin-bottom: 0; padding-bottom: 0;">
        <% @target_firms = TargetFirm.where({:user_id => current_user.id}) %>
        <% @target_firms.each do |target| %>
        <% if Touchpoint.where({:user_id => current_user.id, :firm_id => target.firm_id}).count < (0.8 * target.touch_goal.to_f)%>
        <% color = "warning" %>
        <%elsif (Touchpoint.where({:user_id => current_user.id, :firm_id => target.firm_id}).count >= (0.8 * target.touch_goal.to_f)) && (Touchpoint.where({:user_id => current_user.id, :firm_id => target.firm_id}).count < (1.2 * target.touch_goal.to_f)) %>
        <% color = "caution" %>
        <% else %>
        <% color = "succeed" %>
        <% end %>
        <div class="col col-xs-2">
          <div class="panel panel-<%=color%>" style="width: 150px; height: 200px;">
            <p align="center"><b><%=target.firm.name%></b></p>
            <img src="http://localhost:3000/assets/logos/<%=target.firm.name%>_logo" class="img-responsive">
            <p align="center"><%=Touchpoint.where({:user_id => current_user.id, :firm_id => target.firm_id}).count - target.touch_goal.to_f%></p>
          </div>
        </div>
          <% end %>
        </div>
      </div>
    </div>
    </div>
    <div class="row firm_status">
      <div class="col col-md-12">
        <div class="panel panel-default">
          <div class="panel-heading"  id="dash_panel_head">Research <small class="text-muted">select a firm to learn more</small></div>
          <div class="panel-body">
            <!-- Carousel Test Start -->
            <!-- carousel for medium & large devices -->
            <div id="firmStatusCarousel" class="carousel slide" data-ride="carousel">
              <!-- Indicators -->
              <ol class="carousel-indicators" id="carousel_indicators">
                <li data-target="#myCarousel2" data-slide-to="0" href="firmStatusCarousel0" class="active"></li>
                <li data-target="#myCarousel2" data-slide-to="1" href="firmStatusCarousel1"></li>
                <li data-target="#myCarousel2" data-slide-to="2" href="firmStatusCarousel2"></li>
                <li data-target="#myCarousel2" data-slide-to="3" href="firmStatusCarousel3"></li>
                <li data-target="#myCarousel2" data-slide-to="4" href="firmStatusCarousel4"></li>
                <li data-target="#myCarousel2" data-slide-to="5" href="firmStatusCarousel5"></li>
              </ol>
              <!-- Wrapper for slides -->
              <div class="carousel-inner" role="listbox">
                <% @firms = Firm.all %>
                <% counter = 0 %>
                <% @firms.each do |firm| %>
                <% if counter == 0 %>
                <div class="item active">
                  <div class="row equal">
                <% elsif ((counter % 4) == 0) %>
                    <div class="item">
                      <div class="row equal">
                <% end %>
                        <div class="col col-xs-3">
                          <% if TargetFirm.where({:user_id => current_user.id, :firm_id => firm.id}).count != 0 %>
                          <% @highlight_marker = "highlight" %>
                          <% else %>
                          <% @highlight_marker = "default" %>
                          <% end %>

                          <div class="panel panel-<%=@highlight_marker%>" id="firm_carousel_panel">
                            <div class="logo">
                              <a href="/test/firm_status/<%=firm.id%>"  id="firm_id" name="firm_id">
                                <img class="img-responsive" src="http://localhost:3000/assets/logos/<%=firm.name%>_logo" id="logo">
                              </a>
                            </div>
                            <p style="padding: 10px" align="center"><b><%=firm.name%></b></p>
                          </div>

                        </div>
                        <% counter = counter + 1 %>
                        <% if ((counter % 4) == 0) || (counter == @firms.count) %>
                      </div>
                    </div>
                        <% end %>
                <% end %>
                  </div>
                  <!-- Left and right controls -->
                  <a class="left carousel-control" href="#firmStatusCarousel" role="button" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a class="right carousel-control" href="#firmStatusCarousel" role="button" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                  </a>
                </div>
                <!-- Carousel Test End -->
              </div>
            </div>
          </div>
        </div>
    <div class="row timeline_short">
        <div class="col-xs-12">
          <div class="panel panel-default">
            <div class="panel-heading" id="dash_panel_head">Touchpoints Timeline</div>
            <div class="panel-body">
<!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -->
<!-- Timeline Test Start -->
<!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -->
					<div style="display:inline-block;width:100%;overflow-y:auto;">
					<ul class="timeline timeline-horizontal">

            <% @touchpoints = Touchpoint.where({:user_id => current_user.id}) %>
            <% @touchpoints.order("date ASC").each do |touchpoint| %>
            <li class="timeline-item">
              <a href="/touchpoints/<%=touchpoint.id%>" style="color:black">
              <% if touchpoint.setting.setting == "Informational (phone)" %>
              <div class="timeline-badge phone"><i class="fa fa-phone" aria-hidden="true"></i></div>
              <% elsif touchpoint.setting.setting == "Informational (in-person)" %>
							<div class="timeline-badge person"><i class="fa fa-coffee" aria-hidden="true"></i></div>
              <% elsif touchpoint.setting.setting == "On-Campus Recruiting Event" %>
              <div class="timeline-badge oncampus"><i class="fa fa-users" aria-hidden="true"></i></div>
              <% elsif touchpoint.setting.setting == "Off-Campus Recruiting Event" %>
              <div class="timeline-badge offcampus"><i class="fa fa-glass" aria-hidden="true"></i></div>
              <% else %>
              <div class="timeline-badge-primary"><i class="fa fa-calendar-check-o" aria-hidden="true"></i></div>
              <% end %>
							<div class="timeline-panel">
								<div class="timeline-heading">
                  <img id="timeline_logo" class="img-responsive" src="http://localhost:3000/assets/<%=touchpoint.contact.firm.name%>_logo">
									<p align="center"><b class="timeline-title" style="font-size: 14px;"><%=touchpoint.contact.full_name%></b></p>
                  <p align="center" style="font-size: 10px"><%=touchpoint.setting.setting%></p>
                  <p><small class="text-muted">
                    <i class="glyphicon glyphicon-time"></i>
                    <% if touchpoint.date <= Date.today %>
                    <%=time_ago_in_words(touchpoint.date)%> ago</small></p>
                    <% else %>
                    <%=time_ago_in_words(touchpoint.date)%> from now</small></p>
                    <% end %>
								</div>
							</div>
            </a>
						</li>
            <% end %>
					</ul>
				</div>
<!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -->
<!-- Timeline Test End -->
<!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -->
            </div>
          </div>
        </div>
    </div>
    <div class="row">
        <div class="timeline_long col-xs-12">
          <div class="panel panel-default">
            <div class="panel-heading" id="dash_panel_head">Timeline (Long-Term)</div>
            <div class="panel-body">
<!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -->
<!-- Timeline Test Start -->
<!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -->

<!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -->
<!-- Timeline Test end -->
<!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -->
            </div>
          </div>
        </div>
    </div>
    <div class="row equal">
      <div class="organize col-md-3">
        <div class="panel panel-default">
          <div class="panel-heading" id="dash_panel_head"><strong>Organize</strong> <small>your contacts</small></div>
          <div class="panel-body">
            <ul>
              <li>Manage <a href="/touchpoints">Interactions</a></li>
              <li>Manage <a href="/recruiting_events">Recruiting Events</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="research col-md-3">
        <div class="panel panel-default">
          <div class="panel-heading" id="dash_panel_head"><strong>Research</strong> <small>your approach</small></div>
          <div class="panel-body">
            <p><b>Recruiting</b> <a href="/#">Overview</a></p>
            <p><b>Industry</b> <a href="/#">Overview</a></p>
            <p><b>Firm</b> <a href="/#">Research</a></p>
          </div>
        </div>
      </div>
      <div class="review col-md-3">
        <div class="panel panel-default">
          <div class="panel-heading" id="dash_panel_head"><strong>Review</strong> <small>your data</small></div>
          <div class="panel-body">
            <p><a href="/#">Data Dashboard</a></p>
            <p><a href="/#">My Groups</a></p>
            <p><a href="/#">Shared Data</a></p>
          </div>
        </div>
      </div>
      <div class="p_and_p col-md-3">
        <div class="panel panel-default">
          <div class="panel-heading" id="dash_panel_head"><strong>Plan and Prepare</strong></div>
          <div class="panel-body">
            <p><a href="/#">Events Calendar</a></p>
            <p><a href="/#">Schedule an Interaction</a></p>
            <p><a href="/#">Generate Pre-Brief</a></p>
            <p><a href="/#">Browse Question Bank</a></p>
          </div>
        </div>
      </div>
    </div>
    <div class="row footer">
        <div class="col-xs-12"></div>
    </div>
    <div class="row"></div>
</div>
